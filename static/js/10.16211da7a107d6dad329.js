webpackJsonp([10],{"7K5Q":function(e,t,a){(e.exports=a("bKW+")(!1)).push([e.i,"\n.el-select .el-input[data-v-46b978f0] {\r\n    width: 130px;\n}\r\n",""])},ESOx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{tableData1:[{id:"12987122",number:"88888888",sex:"男",age:31,name:"王小虎",addr:"上海市"},{id:"12987122",number:"88888888",sex:"男",age:32,name:"王小虎",addr:"上海市"},{id:"12987122",number:"88888888",sex:"男",age:32,name:"王小虎",addr:"上海市"},{id:"12987122",number:"88888888",sex:"男",age:35,name:"王小虎",addr:"上海市"},{id:"12987122",number:"88888888",sex:"男",age:36,name:"王小虎",addr:"上海市"}],tableData:[],search:"",searchTag:"",options:{pagenum:1,pagesize:10},searchOptions:{pagenum:1,pagesize:10},totalItem:0,currentPage:1,bitchDelArrayObj:[],bitchDelArray:[],bitchDelLoading:!1,seachLoading:!1,pageLoading:!0,downloadLoading:!1}},beforeMount:function(){var e=this;this.$store.dispatch("GetUsersList",e.options).then(function(t){if(console.log(t),t.data.adminList.length>0){for(var a in t.data.adminList)t.data.adminList[a].delLoading=!1,e.tableData.push(t.data.adminList[a]);e.totalItem=parseInt(t.data.Total),e.currentPage=e.options.pagenum,e.pageLoading=!1}else e.pageLoading=!1,e.tableData.length=0}).catch(function(){})},methods:{handleEdit:function(e,t){console.log(e,t),this.$router.push({name:"editPatient",params:{id:t.user_id}})},handleDelete:function(e,t){console.log(e,t);var a=this;this.$confirm("此操作将删除该行, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.tableData[e].delLoading=!0,a.$store.dispatch("DelUsers",t.user_id).then(function(e){var n=a.tableData.indexOf(t);n>-1&&a.tableData.splice(n,1),a.$message({type:"success",message:"删除成功!"})}).catch(function(){a.tableData[e].delLoading=!1})}).catch(function(){a.tableData[e].delLoading=!1,a.$message({type:"info",message:"已取消删除"})})},handleSelectionChange:function(e){for(var t in console.log(e),this.bitchDelArrayObj.length=0,this.bitchDelArray.length=0,e)this.bitchDelArrayObj.push(e[t]),this.bitchDelArray.push(e[t].user_id)},bitchDel:function(){var e=this;if(0==this.bitchDelArrayObj.length)return e.$message({type:"info",message:"请选择要删除的行"}),!1;this.$confirm("此操作将删除该行, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.bitchDelLoading=!0,e.$store.dispatch("BitchDelUsers",e.bitchDelArray).then(function(t){for(var a in e.bitchDelLoading=!1,e.bitchDelArrayObj){var n=e.tableData.indexOf(e.bitchDelArrayObj[a]);n>-1&&e.tableData.splice(n,1)}e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.bitchDelLoading=!1})}).catch(function(){e.bitchDelLoading=!1,e.$message({type:"info",message:"已取消删除"})})},searchByItem:function(){var e=this;e.searchTag?e.search?(e.seachLoading=!0,e.$store.dispatch("SearchUsers",{searchTag:e.searchTag,search:e.search,pagesize:e.searchOptions.pagesize,pagenum:e.searchOptions.pagenum}).then(function(t){if(e.seachLoading=!1,t.data.adminList.length>0){for(var a in e.tableData.length=0,t.data.adminList)t.data.adminList[a].delLoading=!1,e.tableData.push(t.data.adminList[a]);e.totalItem=parseInt(t.data.Total),e.currentPage=e.options.pagenum,e.pageLoading=!1}else e.$message({type:"info",message:"未查询到内容"})}).catch(function(){e.seachLoading=!1,e.pageLoading=!1})):e.$message({type:"info",message:"请输入搜索内容"}):e.$message({type:"info",message:"请选择搜索项"})},pageChange:function(e){console.log(e);var t=this;t.options.pagenum=e,t.tableData.length=0,this.$store.dispatch("GetUsersList",t.options).then(function(e){if(console.log(e),e.data.adminList.length>0){for(var a in e.data.adminList)e.data.adminList[a].delLoading=!1,t.tableData.push(e.data.adminList[a]);t.totalItem=parseInt(e.data.Total),t.currentPage=t.options.pagenum,t.pageLoading=!1}}).catch(function(){})},handleDownload:function(){var e=this,t=this;this.downloadLoading=!0,this.$store.dispatch("ExportData",{searchTag:t.searchTag,search:t.search}).then(function(n){console.log(n),a.e(16).then(a.bind(null,"zWO4")).then(function(a){var i=t.formatJson(["user_id","number","sex","age","name","bornaddrselect"],n.data.adminList);a.export_json_to_excel({header:["Id","住院编号","性别","年龄","姓名","籍贯"],data:i,filename:"file",autoWidth:!0}),e.downloadLoading=!1})}).catch(function(){})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return"timestamp"===e?parseTime(t[e]):t[e]})})},addNew:function(){this.$router.push({name:"addPatient"})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{staticStyle:{float:"left"},attrs:{span:4}},[a("el-button",{attrs:{size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.addNew}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-circle-close-outline",loading:e.bitchDelLoading},on:{click:function(t){e.bitchDel()}}},[e._v("删除")])],1),e._v(" "),a("el-col",{staticStyle:{float:"right"},attrs:{span:2}},[a("el-button",{attrs:{icon:"document",size:"small",loading:e.downloadLoading},on:{click:e.handleDownload}},[e._v("导出excel")])],1),e._v(" "),a("el-col",{staticStyle:{float:"right"},attrs:{span:8}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchTag,callback:function(t){e.searchTag=t},expression:"searchTag"}},[a("el-option",{attrs:{label:"ID",value:"id"}}),e._v(" "),a("el-option",{attrs:{label:"住院编号",value:"number"}}),e._v(" "),a("el-option",{attrs:{label:"姓名",value:"name"}}),e._v(" "),a("el-option",{attrs:{label:"性别",value:"sex"}}),e._v(" "),a("el-option",{attrs:{label:"年龄",value:"age"}}),e._v(" "),a("el-option",{attrs:{label:"籍贯",value:"addr"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search",loading:e.seachLoading},on:{click:e.searchByItem},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:!0,"empty-text":"暂无数据"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_id",label:"ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"住院编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bornaddrselect",label:"籍贯"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",loading:t.row.delLoading},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[a("el-pagination",{staticStyle:{display:"inline-block"},attrs:{background:"",layout:"prev, pager, next",total:e.totalItem,"page-size":10,"current-page":e.currentPage},on:{"current-change":e.pageChange}})],1)],1)],1)},staticRenderFns:[]};var l=a("XAIM")(n,i,!1,function(e){a("gZpH")},"data-v-46b978f0",null);t.default=l.exports},gZpH:function(e,t,a){var n=a("7K5Q");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("6imX")("535eb7ae",n,!0)}});